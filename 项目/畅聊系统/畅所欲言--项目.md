# 项目原理

## 注册

让用户设置自己的昵称、密码等信息，注册成功后给返回一个专属用户的ID，并将这个ID保存到用户注册列表中，使用哈希map，查找的效率高

## 登陆

用户使用用户ID+密码的形式推送给服务器，然后从注册列表中查找当前用户是否存在，如果不在切换到注册界面，如果在就要校验密码是否正确，如果不正确提示重新输入，如果正确了就返回聊天窗口。

## 聊天

负责聊天的系统整体是一个大生产者消费者模型，一个线程负责接收用户的数据，发送到后端的数据池中，另一个线程负责将数据池中的数据广播给在线用户列表中的所有用户。

# 亮点

一、模拟QQ的登陆方法：让用户设置自己的昵称和密码等相关信息，但是昵称不作为标识用户身份的依据，在注册成功后，向用户返回一个唯一的登陆ID，之后用户使用ID+密码的方式登陆。这样做可以使用户避免因为昵称重复而去想自己的昵称，导致对这个产品失去兴趣。这一点虽然可以使用手机号注册，但是有很多软件都是使用手机号注册的，可能会让用户将这个软件遗忘。

# 可扩展

1、给用户返回的注册ID比较好记。

2、可以将用户的之前的聊天记录存放到云端数据库。



端口号和PID的区别



怎么实现多线程？

服务端每接收到一个请求就就给他申请一个线程，然后将这个线程分离

怎么进行多路转发？

用户列表用unordered_map保存，我们不需要有序，只需要快速查找是否在这个容器中。

在线列表中的数据是一个int（ID），另一个是struct sockaddr_in，第二个参数的原因是因为他可能会在不同的PC上登陆，所以是会随时变动的。



模仿HTTP，使用jesioncpp库实现序列化和反序列化



注册和登陆采用的是短连接的方式，一旦登陆成功或者注册成功就会断开连接，释放线程。



shell脚本：开头必须要#！然后要指明解释器的路径和名称

整个项目分为两个大模块：登陆注册模块，聊天模块+  



如果一个用户连续发送多条数据，但是其他用户并没有发送数据，这时会出现什么？



# 项目介绍

我做这个项目是从今天春招的时候开始的，在春招的时候我出去找实习，面试被刷了很多，有一次我就问（完美世界）面试官，为什么我经常被刷，是因为我的专业是偏硬件的还是怎么样？面试官告诉我，找工作需要一两个合适的项目才可以，这样才能看出你的代码能力，然后我就回学校找老师聊了聊，老师让我从生活中找入口。这个畅所欲言的项目是有一次我和我爸妈开群视频的时候我给他们说了这个事，然后我爸就给举了个例子可以做一个聊天的，那之后我就开始着手准备这个项目。
这个项目用到最多的知识点就是套接字编程，主要分为三个大块：客户端、服务器和数据池。客户端主要是负责让用户操作，提供登陆、注册、退出还有聊天的窗口，服务器主要是实现登陆、注册、退出还有将数据发送给数据池、从数据池中获取到数据广播给在线的用户。
在服务器中维护了一个用户列表和一个用户在线列表，
当用户在登陆的时候在用户列表中查看一下用户ID是否存在，如果存在就校验密码是否正确，如果没有存在就提示用户需要注册，然后用户根据提示进行注册，这里模仿了QQ的注册机制，给用户返回一个唯一标识账户的ID。
当用户登陆的时候已经在用户列表中找到当前用户已经注册，就要到用户在线列表中查找是否已经登陆，避免重复登录。
负责用户收发数据的是一个生产者消费者模型，发送数据的一方是生产者、接收数据的一方是消费者、数据池就是生产者和消费者的交易场所。当用户在发送了一条数据，在服务器中是模仿的HTTP协议，一个线程通过jesoncpp将数据进行序列化，发送到数据池，另一个线程负责从数据池中获取数据，然后进行反序列化，对用户在线列表中的用户将数据进行广播。



